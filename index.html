<!DOCTYPE html>
<html>
<body>
<script src='bower_components/d3/d3.js' charset='utf-8'></script>
<script src='bower_components/jquery/jquery.js' charset='utf-8'></script>
<script src='bower_components/lodash/dist/lodash.js' charset='utf-8'></script>
<script src='d4.js' charset='utf-8'></script>
<script>

var boxSpec = d4.spec('rect')
  .enter(function(rect, d) {
    return rect
      .attr('x', d.bounds[0])
      .attr('y', d.bounds[1])
      .attr('width', d.bounds[2])
      .attr('height', d.bounds[3])
      .attr('fill', d.color)
      .attr('opacity', 0.5)
      ;
  })
  ;

var ellipSpec = d4.spec('ellipse')
  .enter(function(ellipse, d) {
    return ellipse
      .attr('fill', d.color)
      ;
  })
  .merge(function(ellipse, d) {
    var rx = d.bounds[2] / 2;
    var ry = d.bounds[3] / 2;
    return ellipse
      .transition()
      .duration(1000)
      .attr('cx', d.bounds[0] + rx)
      .attr('cy', d.bounds[1] + ry)
      .attr('rx', rx)
      .attr('ry', ry)
      .attr('fill', d.color)
      .attr('opacity', 0.3)
      ;
  })
  ;

var diagram = d4.spec('svg')
  .child(boxSpec)
  .child(ellipSpec)
  ;

var data = {
  bounds: [200,150,100,45],
  color: 'blue'
};

diagram.render(d3.select('body'), [data]);

setTimeout(function () {
  data.bounds[0] += 200;
  data.bounds[1] += 50;
  data.bounds[2] += 400;
  data.bounds[3] += 100;
  data.color = 'red';
  diagram.render(d3.select('body'), [data]);
}, 2000);

</script>
</body>
</html>